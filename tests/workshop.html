<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HNN Textbook</title>
    <!-- <base href="/website_redesign/"> -->
    <link href="https://fonts.googleapis.com/css2?family=Fira+Sans:wght@400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../content/assets/styles.css">
</head>
<body>

	<div id="mySidebar" class="sidebar">
		<div class="navbar-header">
		<a>
			Human Neocortical Neurosolver
		</a>
		<br>
			<svg class="collapse-icon" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
				<path d="M9 9H4v1h5V9z"/>
				<path fill-rule="evenodd" clip-rule="evenodd" d="M5 3l1-1h7l1 1v7l-1 1h-2v2l-1 1H3l-1-1V6l1-1h2V3zm1 2h4l1 1v4h2V3H6v2zm4 1H3v7h7V6z"/>
			</svg>
		</div>
		<a href="/website_redesign/content/preface.html">Preface</a>
		<div class="sidebar-list">
			<a id="sidebar-header" onclick="toggleSubmenu(event)">
		<span class="toggle-icon">+</span>
				1. Getting Started
			</a>
			<div class="submenu">
				<a href="/website_redesign/content/01_getting_started/challenge.html">1.1 Introducing HNN</a>
				<a href="/website_redesign/content/01_getting_started/template_model.html">1.2 Template Model</a>
				<a href="/website_redesign/content/01_getting_started/installation.html">1.3 Installation</a>
			</div>
		</div>
		<div class="sidebar-list">
			<a id="sidebar-header" onclick="toggleSubmenu(event)">
		<span class="toggle-icon">+</span>
				2. Model Assumptions
			</a>
			<div class="submenu">
				<a href="/website_redesign/content/03_model_assumptions/cortical_column_structure.html">2.1 Cortical Column Structure</a>
				<a href="/website_redesign/content/03_model_assumptions/primary_electric_currents.html">2.2 Primary Electrical Currents</a>
				<a href="/website_redesign/content/03_model_assumptions/neurons_morphology_and_physiology.html">2.3 Neurons: Morphology and Physiology</a>
				<a href="/website_redesign/content/03_model_assumptions/synaptic_connectivity.html">2.4 Synaptic Connectivity</a>
				<a href="/website_redesign/content/03_model_assumptions/evoked_and_rhythmic_driving_inputs.html">2.5 Evoked and Rhythmic Driving Inputs</a>
				<a href="/website_redesign/content/03_model_assumptions/tonic_and_noisy_driving_inputs.html">2.6 Tonic and Noisy Driving Inputs</a>
			</div>
		</div>
		<div class="sidebar-list">
			<a id="sidebar-header" onclick="toggleSubmenu(event)">
		<span class="toggle-icon">+</span>
				3. Simulating ERPs
			</a>
			<div class="submenu">
				<a href="/website_redesign/content/05_erps/erps_in_gui.html">3.1 GUI Tutorial of ERPs Simulation</a>
				<a href="/website_redesign/content/05_erps/hnn_core.html">3.2 API Tutorial of ERPs Simulation</a>
			</div>
		</div>
		<div class="sidebar-list">
			<a id="sidebar-header" onclick="toggleSubmenu(event)">
		<span class="toggle-icon">+</span>
				4. Simulating Alpha/Beta Rhythms
			</a>
			<div class="submenu">
				<a href="/website_redesign/content/06_alpha_beta/gui.html">4.1 GUI Tutorial of Alpha/Beta Rhythms</a>
				<a href="/website_redesign/content/06_alpha_beta/api.html">4.2 API Tutorial of Alpha/Beta Rhythms</a>
			</div>
		</div>
		<div class="sidebar-list">
			<a id="sidebar-header" onclick="toggleSubmenu(event)">
		<span class="toggle-icon">+</span>
				5. Simulating Gamma Rhythms
			</a>
			<div class="submenu">
				<a href="/website_redesign/content/07_gamma/gamma_in_gui.html">5.1 GUI Tutorial of Gamma Rhythms</a>
				<a href="/website_redesign/content/07_gamma/gamma_in_api.html">5.2 API Tutorial of Gamma Rhythms</a>
			</div>
		</div>
		<div class="sidebar-list">
			<a id="sidebar-header" onclick="toggleSubmenu(event)">
		<span class="toggle-icon">+</span>
				6. From Data to Simulation
			</a>
			<div class="submenu">
				<a href="/website_redesign/content/08_data_to_simulation/from_meg_to_hnn.html">6.1 From MEG sensor-space data to HNN simulation</a>
			</div>
		</div>
		<div class="sidebar-list">
			<a id="sidebar-header" onclick="toggleSubmenu(event)">
		<span class="toggle-icon">+</span>
				7. Feature Demos
			</a>
			<div class="submenu">
				<a href="/website_redesign/content/09_feature_demos/plot_firing_pattern.html">7.1 Plot Firing Pattern</a>
				<a href="/website_redesign/content/09_feature_demos/record_and_plot_extracellular_potentials.html">7.2 Record & Plot Extracellular Potentials</a>
				<a href="/website_redesign/content/09_feature_demos/modifying_local_connectivity.html">7.3 Modifying Local Connectivity</a>
				<a href="/website_redesign/content/09_feature_demos/animating_hnn_simulations.html">7.4 Animating HNN Simulations</a>
				<a href="/website_redesign/content/09_feature_demos/batch_simulation.html">7.5 Batch Simulation</a>
				<a href="/website_redesign/content/09_feature_demos/simulate_beta_modulated_erp.html">7.6 Simulate Beta-modulated ERP</a>
				<a href="/website_redesign/content/09_feature_demos/use_mpi_backend_for_parallelization.html">7.7 Use MPI Backend for Parallelization</a>
				<a href="/website_redesign/content/09_feature_demos/optimize_simulated_evoked_response_parameters.html">7.8 Optimize simulated evoked response parameters</a>
				<a href="/website_redesign/content/09_feature_demos/optimize_simulated_rhythmic_response_parameters.html">7.9 Optimize simulated rhythmic response parameters</a>
			</div>
		</div>
	<div style='height: 30px;'></div>
	</div>

    <div class="topbar">

        <!-- Topbar menu -->
        <div class="menu-container">
            <div class="menu-icons">
                <button class="openbtn" onclick="toggleNav()">
                    â˜°
                </button>
                <a href="" class="home-link">
                    <div class="home-icon-container">
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="24" 
                            height="24"
                            viewBox="0 0 24 24" 
                            class="home-icon">
                            <path
                                d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"
                            />
                        </svg>
                    </div>
                </a>
                <button class="theme-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                        <path d="M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391 371.1 498.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391 13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256 2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121 140.9 13.1c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1 346.3 2.8c4.5-3.1 10.2-3.7 15.2-1.6zM160 256a96 96 0 1 1 192 0 96 96 0 1 1 -192 0zm224 0a128 128 0 1 0 -256 0 128 128 0 1 0 256 0z"></path>
                    </svg>
                </button>
                <div class="dropdown">
                    <button 
                        id="dropdownButton" 
                        class="dropdown-button">
                            <img
                                src="/website_redesign/content/assets/icons/fontsize.png"
                                alt="fontsize"
                            />
                    </button>
                    <div class="dropdown-content">
                        <button 
                            class="fontsize-btn" 
                            onclick="decreaseFontSize()">
                            <img
                                src="/website_redesign/content/assets/icons/fontminus.png"
                                alt="fontminus"
                            />
                        </button>
                        <button 
                            class="fontsize-btn" 
                            onclick="increaseFontSize()">
                            <img
                                src="/website_redesign/content/assets/icons/fontplus.png"
                                alt="fontplus"
                            />
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Topbar image -->
        <div class="topbar-logo-container">
            <img 
                id="topbar-logo"
                src="https://hnn.brown.edu/wp-content/uploads/hnn-medium.png"
            />
        </div>

        <!-- Right side of topbar -->
        <div class="socials-container">
            <div class="social-icons">
                <a 
                    href="https://github.com/jonescompneurolab/hnn-core" 
                    target="_blank" 
                    aria-label="GitHub">
                    <img 
                        src="/website_redesign/content/assets/icons/github.png"
                        alt="GitHub">
                </a>
                <a 
                    href="https://bsky.app/profile/hnnsolver.bsky.social" 
                    target="_blank"
                    aria-label="BlueSky">
                    <img 
                        src="/website_redesign/content/assets/icons/bluesky.png"
                        alt="BlueSky">
                </a>
                <a 
                    href="https://www.linkedin.com/company/human-neocortical-neurosolver/" 
                    target="_blank"
                    aria-label="LinkedIn">
                    <img 
                        src="/website_redesign/content/assets/icons/linkedin.png"
                        alt="LinkedIn">
                </a>
            </div>
        </div>
    </div>

    <div id="main">
    <div id="content-wrapper">
    <div id="content">

        <!--
        # Title: Workshop Instructions
        # Updated: 2025-03-18
        #
        # Contributors:
            # Dylan Daniels
        -->
            
        <h1>
            Online HNN Workshop, Spring 2025
        </h1>
        <p>
            Welcome to our Online HNN Workshop for spring 2025! In this interactive workshop, we will begin with a didactic overview of the background and development of HNN. We will then introduce you to the GUI and Python interfaces of HNN through lectures and hands-on investigations of the most commonly measured signals, including ERPs and low-frequency brain rhythms. We will also cover automatic parameter optimization in the Python interface.
        </p>
        <h3>
            Table of Contents
        </h3>
        <ol>
            <li>
                <a style="color: inherit;" href="https://dylansdaniels.github.io/website_redesign/tests/workshop.html#workshop-schedule">
                    Workshop Schedule
                </a>
            </li>
            <li>
                <a style="color: inherit;" href="https://dylansdaniels.github.io/website_redesign/tests/workshop.html#installing-and-running-hnn">
                    Installing and Running HNN
                </a>
            </li>
            <li>
                <a style="color: inherit;" href="https://dylansdaniels.github.io/website_redesign/tests/workshop.html#downloading-workshop-materials">
                    Downloading Workshop Materials
                </a>
            </li>
            <li>
                <a style="color: inherit;" href="https://dylansdaniels.github.io/website_redesign/tests/workshop.html#erp-tutorial-with-hnn-gui">ERP Tutorial with HNN GUI</a>
            </li>
        </ol>
        </span>
        <h3>
            Workshop Schedule
        </h3>
            <table class="schedule-table">
                <tr>
                    <td colspan=5 class="title-row">
                        Morning
                    </td>
                </tr>
                <tr>
                    <td>
                        9:00 AM - 9:45 AM
                    </td>
                    <td>
                        Lecture
                    </td>
                    <td>
                        Overview of HNN with Q&A
                    </td>
                    <td>
                        Dr. Stephanie Jones
                    </td>
                    <td>
                        <a href="https://brown.zoom.us/j/3960812865?omn=97061684431">
                            Link
                        </a>
                    </td>
                </tr>
                <tr>
                    <td>
                        10:00 AM - 12:00 PM
                    </td>
                    <td>
                        Hands-On
                    </td>
                    <td>
                        Simulating an Event-Related Potential (ERP) in HNN GUI
                    </td>
                    <td>
                        Dylan Daniels
                    </td>
                    <td>
                        <a href="https://brown.zoom.us/j/3960812865?omn=97061684431">
                            Link
                        </a>
                    </td>
                </tr>
                <tr>
                    <td>
                        12:00 PM - 1:00 PM
                    </td>
                    <td>
                        Break
                    </td>
                    <td>
                        Lunch break and office hours
                    </td>
                    <td>
                        
                    </td>
                    <td/>
                </tr>
                <tr>
                    <td colspan=5 class="title-row">
                        Afternoon Path 1: Oscillations in HNN GUI
                    </td>
                </tr>
                <tr>
                    <td>
                        1:00 PM - 1:20 PM
                    </td>
                    <td>
                        Lecture
                    </td>
                    <td>
                        Overview of Oscillations
                    </td>
                    <td>
                        Dr. Stephanie Jones
                    </td>
                    <td>
                        <a href="https://brown.zoom.us/s/97539625885">
                            Link
                        </a>
                    </td>
                </tr>
                <tr>
                    <td>
                        1:20 PM - 3:00 PM
                    </td>
                    <td>
                        Hands-On
                    </td>
                    <td>
                        Simulating oscillations in the HNN GUI
                    </td>
                    <td>
                        Dr. Austin Soplata
                    </td>
                    <td>
                        <a href="https://brown.zoom.us/s/97539625885">
                            Link
                        </a>
                    </td>
                </tr>
                <tr>
                    <td colspan=5 class="title-row">
                        Afternoon Path 2: ERP and Optimization in the HNN API
                    </td>
                </tr>
                <tr>
                    <td>
                        1:00 PM - 3:00 PM
                    </td>
                    <td>
                        Hands-On
                    </td>
                    <td>
                        Simulating an Event-Related Potential (ERP) in the HNN API
                    </td>
                    <td>
                        Dr. Carolina Fernandez
                    </td>
                    <td>
                        <a href="https://brown.zoom.us/j/97712981286">
                            Link
                        </a>
                    </td>
                </tr>
            </table>

        <h2>
            Installing and Running HNN
        </h2>

        <h5>
            Running HNN GUI in the Cloud (Google CoLab)
        </h5>

            <p>
                We offer many methods to use HNN. To use the HNN GUI without installing it locally, you can use our <a href="https://colab.research.google.com/drive/1yyjuEBimIu_f7_0Nf3YLwUiVOO7ZrKK3?usp=sharing">click here to open our Google CoLab notebook.</a> This is the simplest way to use HNN, but the simulations will take notably longer. This method does require a Google account, but the resources are <b>free</b> and allow you to run HNN GUI at no charge. To run the notebook, click "Runtime" then "Run all", and follow the instructions.
            </p>
        
        <h5>
            Installing and Running HNN GUI on Your Machine
        </h5>

        <p>
            Click on the section below that matches your operating instructions to view the local installation instructions. If you have any problems installing HNN locally using the instructions below, please use the Google CoLab notebook per the instructions above.
        </p>

        <div class="collapsible-section">
            <h5 class="collapsible-header">
                MacOS
            </h5>

            <div class="collapsible-content">
                <p>
                If you are new to HNN and biophysical simulations with NEURON, we recommend you do the following to locally install the fastest version of HNN on your Mac computer:
                </p>

                <ol>
                    <li>
                    Download and install the <a href="https://www.anaconda.com/download/success">Anaconda Python distribution here</a>, using the default settings.
                    </li>
                    <li>
                    Open a "Terminal" application and install "Xcode Command-Line Tools" by running the following command:
                    <code id="block">
                        xcode-select --install
                    </code>
                    </li>
                    <li>
                    Close the Terminal window. If the command says "Command line tools are already installed", move to the next step. If the command takes the time to install itself (approximately 10 minutes), then <b>make sure you restart your computer</b>.
                    </li>
                    <li>
                    After restart, open a <b>new</b> Terminal window. The following commands will remove any existing Conda environments named "hnn-core-env", but it will install HNN with <b>Parallelism/MPI</b> support, which is the fastest version of HNN. Copy, paste, and run the following text:
                    <code id="block">
                        conda activate base <br>
                        conda env remove -y -n hnn-core-env <br>
                        conda create -y -q -n hnn-core-env python=3.12 <br>
                        conda activate hnn-core-env <br>
                        mkdir -p $CONDA_PREFIX/etc/conda/activate.d $CONDA_PREFIX/etc/conda/deactivate.d <br>
                        echo "export OLD_DYLD_FALLBACK_LIBRARY_PATH=\$DYLD_FALLBACK_LIBRARY_PATH" >> $CONDA_PREFIX/etc/conda/activate.d/env_vars.sh <br>
                        echo "export DYLD_FALLBACK_LIBRARY_PATH=\$DYLD_FALLBACK_LIBRARY_PATH:\${CONDA_PREFIX}/lib" >> $CONDA_PREFIX/etc/conda/activate.d/env_vars.sh <br>
                        echo "export DYLD_FALLBACK_LIBRARY_PATH=\$OLD_DYLD_FALLBACK_LIBRARY_PATH" >> $CONDA_PREFIX/etc/conda/deactivate.d/env_vars.sh <br>
                        echo "unset OLD_DYLD_FALLBACK_LIBRARY_PATH" >> $CONDA_PREFIX/etc/conda/deactivate.d/env_vars.sh <br>
                        export OLD_DYLD_FALLBACK_LIBRARY_PATH=$DYLD_FALLBACK_LIBRARY_PATH <br>
                        export DYLD_FALLBACK_LIBRARY_PATH=$LD_LIBRARY_PATH:${CONDA_PREFIX}/lib <br>
                        conda install -y -q "openmpi>5" mpi4py -c conda-forge <br>
                        pip install "hnn-core[gui,opt,parallel]" <br>
                    </code>
                    </li>
                    <li>
                    Run the following command, which will print a number to the window. Write down this number somewhere, and later <b>you can enter this number in the "Cores" textbox of the HNN GUI for significant speedup!</b>
                    <code id="block">
                        conda activate hnn-core-env<br>
                        python -c "import psutil ; print(psutil.cpu_count(logical=False)-1)"
                    </code>
                    </li>
                    <li>
                    HNN should now be installed! You should be able to start the GUI by then running the following command in the Terminal window:
                    <code id="block">
                        conda activate hnn-core-env<br>
                        hnn-gui
                    </code>
                    </li>
                    <li>
                    Troubleshooting: If you run into any errors, you may still be able to install HNN locally, but without Parallelism/MPI speedup, by running the following command in the Terminal. If you still cannot run the GUI after running the following command, we recommend you use the Google CoLab method mentioned above. You can also follow our full <a href="https://jonescompneurolab.github.io/hnn-core/stable/install.html">Installation Guide here</a> and ask us for help with installation after the workshop.
                    <code id="block">
                        pip install "hnn-core[gui,opt]"
                    </code>
                    </li>
                </ol>
        
            </div>
        </div>

        <br>
        
        <div class="collapsible-section">
            <h5 class="collapsible-header">
                Linux
            </h5>

            <div class="collapsible-content">
                <p>
                If you are new to HNN and biophysical simulations with NEURON, we recommend you do the following to locally install the fastest version of HNN on your personal Linux computer. If you have installed NEURON previously, we recommend you uninstall any system-wide package installations of it.
                </p>

                <ol>
                    <li>
                    Download and install the <a href="https://www.anaconda.com/download/success">Anaconda Python distribution here</a>, using the default settings.
                    </li>
                    <li>
                    Open a <b>new</b> terminal emulator window. The following commands will remove any existing Conda environments named "hnn-core-env", but it will install HNN with <b>Parallelism/MPI</b> support, which is the fastest version of HNN. Copy, paste, and run the following text:
                    <code id="block">
                        conda activate base <br>
                        conda env remove -y -n hnn-core-env <br>
                        conda create -y -q -n hnn-core-env python=3.12 <br>
                        conda activate hnn-core-env <br>
                        mkdir -p $CONDA_PREFIX/etc/conda/activate.d $CONDA_PREFIX/etc/conda/deactivate.d <br>
                        echo "export OLD_LD_LIBRARY_PATH=\$LD_LIBRARY_PATH" >> $CONDA_PREFIX/etc/conda/activate.d/env_vars.sh <br>
                        echo "export LD_LIBRARY_PATH=\$LD_LIBRARY_PATH:\${CONDA_PREFIX}/lib" >> $CONDA_PREFIX/etc/conda/activate.d/env_vars.sh <br>
                        echo "export LD_LIBRARY_PATH=\$OLD_LD_LIBRARY_PATH" >> $CONDA_PREFIX/etc/conda/deactivate.d/env_vars.sh <br>
                        echo "unset OLD_LD_LIBRARY_PATH" >> $CONDA_PREFIX/etc/conda/deactivate.d/env_vars.sh <br>
                        export OLD_LD_LIBRARY_PATH=$LD_LIBRARY_PATH <br>
                        export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:${CONDA_PREFIX}/lib <br>
                        conda install -y -q "openmpi>5" mpi4py -c conda-forge <br>
                        pip install "hnn-core[gui,opt,parallel]" <br>
                    </code>
                    </li>
                    <li>
                    Run the following command, which will print a number to the window. Write down this number somewhere, and later <b>you can enter this number in the "Cores" textbox of the HNN GUI for significant speedup!</b>
                    <code id="block">
                        conda activate hnn-core-env<br>
                        python -c "import psutil ; print(psutil.cpu_count(logical=False)-1)"
                    </code>
                    </li>
                    <li>
                    HNN should now be installed! You should be able to start the GUI by then running the following command in the terminal window:
                    <code id="block">
                        conda activate hnn-core-env<br>
                        hnn-gui
                    </code>
                    </li>
                    <li>
                    Troubleshooting: If you run into any errors, you may still be able to install HNN locally, but without Parallelism/MPI speedup, by running the following command in the terminal. If you still cannot run the GUI after running the following command, we recommend you use the Google CoLab method mentioned above. You can also follow our full <a href="https://jonescompneurolab.github.io/hnn-core/stable/install.html">Installation Guide here</a> and ask us for help with installation after the workshop.
                    <code id="block">
                        pip install "hnn-core[gui,opt]"
                    </code>
                    </li>
                </ol>

            </div>
        </div>

        <br>
        
        <div class="collapsible-section">
            <h5 class="collapsible-header">
                Windows
            </h5>

            <div class="collapsible-content">

                <p>
                    If you are using a Windows machine, we strongly recommend you use the Google CoLab method above, since HNN runs slower on Windows, and we currently do not support Parallelism/MPI on Windows. If you still want to install HNN locally on Windows, follow these directions:
                </p>

                <ol>
                    <li>
                        Download and install the <a href="https://www.anaconda.com/download/success">Anaconda Python distribution here</a>, using the default settings.
                    </li>
                    <li>
                        Download and install the <a href="https://github.com/neuronsimulator/nrn/releases/download/8.2.6/nrn-8.2.6.w64-mingw-py-38-39-310-311-312-setup.exe">Windows-specific NEURON binaries here</a>, using the default settings.
                    </li>
                    <li>
                        Open the application "Anaconda Navigator" and create a new Python environment with Python version 3.12 or below.
                    </li>
                    <li>
                        Open a Terminal in the new Python environment and run the following command:
                        <code id="block">
                            pip install "hnn-core[gui,opt]"
                        </code>
                    </li>
                    <li>
                        HNN should now be installed! You should be able to start the GUI by then running the following command in the terminal window:
                        <code id="block">
                            hnn-gui
                        </code>
                    </li>
                    <li>
                        Troubleshooting: If you run into any errors, then please use the Google CoLab method above.
                    </li>
                </ol>
            </div>
        </div>
        <h3>
            Downloading Workshop Materials
        </h3>
        <p>
            To follow along with the interactive portions of the workshop, you will need to download the workshop materials available in the <code>workshop materials</code> folder of our <a href="https://github.com/jonescompneurolab/hnn-data">hnn-data</a> GitHub repository.
        </p>
        <p>
            To <i>only</i> retrieve the required materials for the hands-on ERP Tutorial with HNN GUI, you can click <a href="https://download-directory.github.io/?url=https%3A%2F%2Fgithub.com%2Fjonescompneurolab%2Fhnn-data%2Ftree%2F92fbb40023630ceefcf344729a512ca86c8be2a8%2Fworkshops%2Ferp_gui_walkthrough">here</a> to download the necessary files from Download Directory.
        </p>
        <p>
            Additionally, we will refer to the schematic below throughout the workshop, and we include it here for your reference.
        </p>
        <h6 style="text-align: center;">Figure A</h6>
        <img src="https://dylansdaniels.github.io/hnn-tutorials/workshop-instructions/imgs/full_schematic.png" alt="full schematic" style="width: 100%; max-width: 800px; margin: 0 auto; display: block;">
        <h2>
            ERP Tutorial with HNN GUI
        </h2>
        <p>
            In this section of the hands-on workshop, we will walk through the steps for 1) simulating an ERP in the GUI, and 2) adjusting model parameters to get a better match to experimental data. 
            <br><br>
            The primary goal of this segment of the workshop is to give you an example of how to use HNN to explore the neural mechanisms underlying the recorded signals in your own experimental data.
            
            Specifically, we provide you with source-localized MEG data from a tactile detection task (see our <a href="https://dylansdaniels.github.io/website_redesign/content/05_erps/erps_in_gui.html#getting-started">ERP tutorial</a> for more information on the data and the experimental design), and we walk you through the process of 'hand-tuning' the timing and strengths of the external drives to the network. 
            <br><br>
            Below, we include a figure from our lab's published work (see Jones et al., 2007) that shows the experimental data we will be using in this tutorial (left panel), as well as the simulated evoked responses used in the paper (right panel). We will reference this figure in the sections that follow.  
        </p>
        <h6 style="text-align: center;">Figure B</h6>
        <img src="https://dylansdaniels.github.io/website_redesign/content/05_erps/images/erp_fig_01.png" alt="erp fig 01" style="width: 100%; max-width: 800px; margin: 0 auto; display: block;">
        <p>
            For each exercise in the GUI walkthrough, we will provide a set of steps you can follow to reach the intended 'starting point' for completing the exercise. (The 'starting point' is the assumed state of the GUI <i>before</i> you begin the exercise.)
        </p>
        <h4>
            Interactive Exercise 1
        </h4>
        <p>
            In this exercise, we will adjust the <code>Smooth Window</code> and the <code>Dipole Scaling</code> of the simulated waveform to see if we can get a better match to the experimental data we load into HNN. 
        </p>
        <p>
            Remember that "scaling" in this case refers to a scaling factor applied to our simulated waveform. You can think of the scaling factor as a measure of the number of cells contributing to the simulated signal. "Smoothing" is also related to the number of cells contributing to the signal, and can be thought of as the effect of averaging across a large population of cells.
        </p>
        <div class="collapsible-section">
            <h5 class="collapsible-header">
                Exercise 1 Starting Point
            </h5>

            <div class="collapsible-content">
                <ul>
                <li>
                    Refresh the HNN GUI to restore the default state.
                </li>
                <li>
                    Click <code>Load data</code>. From the "workshops/erp_gui_walkthrough" directory of the "hnn-data" folder, select the "experimental_S1_SupraT.txt" data file. 
                </li>
                <li>
                    Click <code>Run</code> to run the "default" simulation
                </li>
                <li>
                    Click the <code>Visualization</code> tab. This should bring you to the tab "ax1" of "Figure 2", corresponding to the lower subplot of Figure 2. 
                </li>
                <li>
                    Under the "ax1" tab, click on the downdown box next to <code>Data to compare</code> and select "experimental_S1_SupraT". 
                </li>
                <li>
                    Click the <code>Clear axis</code> button at the bottom of the "ax1" tab
                </li>
                <li>
                    Click the <code>Add plot</code> button
                </li>
                </ul>
            </div>
        </div>
        <br>
        <div class="collapsible-section">
            <h5 class="collapsible-header">
                Exercise 1.1
            </h5>

            <div class="collapsible-content">
                <ul>
                    <li>
                        From the <code>Visualization</code> tab, adjust the "Dipole Smooth Window (ms)" in the dipole plot produced by your simulation. If you're following from the "Starting Point" outlined above, this would correspond to the "ax1" tab of "Figure 2".
                    </li>
                    <li>
                        Try the following values: 
                        <code> 0, 15, and 90</code>.
                    <li>
                        After updating the value of the Dipole Smooth Window, click "Add plot" to overlay the new dipole on the old dipole. Alternatively, you can first click "Clear axis" and then "Add plot" if you do not want to overlay the dipoles.
                    </li>
            </div>
        </div>
            <p>
            <b>Discussion Questions:</b>
            <ul>
                <li>
                    What is the effect of increasing the smoothing window on the waveform shape?
                </li>
                <li>
                    How do you determine the "right" level of smoothing? 
                </li>
            </ul>
        </p>
        <div class="collapsible-section">
            <h5 class="collapsible-header">
                Exercise 1.2
            </h5>

            <div class="collapsible-content">
                <ul>
                    <li>
                        Reset the <code>Dipole Smooth Window (ms)</code> to its default value of <code>30</code>
                    </li>
                    <li>
                        Adjust the <code>Simulation Dipole Scaling</code> in the "ax1" tab of "Figure 2".
                    </li>
                    <li>
                        Try the following values: 
                        <code> 1500, 5000, 10000</code>.
                    </li>
                    <li>
                        Be sure to click "Clear axis" and then "Add plot" after each adjustment to get the updated RMSE.
                    </li>
                </ul>
            </div>
        </div>
        <p>
            <b>Discussion Questions:</b> 
            <ul>
                <li>
                    How does changing the scaling factor affect the waveform shape?
                </li>
                <li>
                    Why might you choose one scaling value over another?
                </li>
            </ul>
        </p>
        <div class="collapsible-section">
            <h5 class="collapsible-header">
                Exercise 1.3
            </h5>

            <div class="collapsible-content">
                <p>
                    Reset the <code>Simulation Dipole Scaling</code> to its default value of <code>3000</code>. 
                    <br><br>
                    Let's now load a different set of evoked drives that was tuned for the suprathreshold experimental condition and compare the new simulation to the default simulation. 
                </p>
                <ul>
                    <li>
                        Select the <code>External Drives</code> tab and then click the <code>Load external drives</code> button.
                    </li>
                    <li>
                        From the "workshops/erp_gui_walkthrough" directory of the "hnn-data" folder, select the "ERPSupraT_All_Drives.json" parameter file.
                    </li>
                    <li>
                        Change the name of the simulation to something informative, and then click <code>Run</code>.
                    </li>
                    <li>
                        Follow the steps outlined above to overlay the experimental data on the new dipole plot.
                    </li>
                </ul>
            </div>
        </div>
        <p>
            <b>Discussion Questions:</b> 
            <ul>
                <li>
                    What differences do you observe in the input histograms and the dipole waveform for the two simulations?
                </li>
                <li>
                    Which simulation yields a lower RMSE? Which simulation yields a dipole that more closely matches the shape of the experimental data?
                </li>
                <li>
                    Is it the case that the simulation with the lower RMSE will always yield a better match to the shape of the experimental data?
                </li>
            </ul>
        </p>
        <div class="callout callout-note">
            <table class="callout-table">
                <tr>
                    <td class="emoji-cell">
                        <svg class="lightbulb-icon" viewBox="0 0 24 24" width="20" height="20">
                            <path d="M12 2.75C8.27208 2.75 5.25 5.77208 5.25 9.5C5.25 11.4985 6.11758 13.2934 7.49907 14.5304L7.50342 14.5343C8.06008 15.0328 8.48295 15.4114 8.78527 15.6886C9.06989 15.9495 9.29537 16.1628 9.41353 16.3086L9.42636 16.3244C9.64763 16.5974 9.84045 16.8353 9.9676 17.1199C10.0948 17.4044 10.1434 17.7067 10.1992 18.0537L10.2024 18.0738C10.231 18.2517 10.2425 18.4701 10.247 18.75H13.753C13.7575 18.4701 13.769 18.2517 13.7976 18.0738L13.8008 18.0537C13.8566 17.7067 13.9052 17.4044 14.0324 17.1199C14.1596 16.8353 14.3524 16.5974 14.5736 16.3244L14.5865 16.3086C14.7046 16.1628 14.9301 15.9495 15.2147 15.6886C15.5171 15.4114 15.94 15.0327 16.4966 14.5343L16.5009 14.5304C17.8824 13.2934 18.75 11.4985 18.75 9.5C18.75 5.77208 15.7279 2.75 12 2.75ZM13.7436 20.25H10.2564C10.2597 20.3542 10.2646 20.4453 10.2721 20.5273C10.2925 20.7524 10.3269 20.8341 10.3505 20.875C10.4163 20.989 10.511 21.0837 10.625 21.1495C10.6659 21.1731 10.7476 21.2075 10.9727 21.2279C11.2082 21.2493 11.5189 21.25 12 21.25C12.4811 21.25 12.7918 21.2493 13.0273 21.2279C13.2524 21.2075 13.3341 21.1731 13.375 21.1495C13.489 21.0837 13.5837 20.989 13.6495 20.875C13.6731 20.8341 13.7075 20.7524 13.7279 20.5273C13.7354 20.4453 13.7403 20.3542 13.7436 20.25ZM3.75 9.5C3.75 4.94365 7.44365 1.25 12 1.25C16.5563 1.25 20.25 4.94365 20.25 9.5C20.25 11.9428 19.1874 14.1384 17.5016 15.6479C16.9397 16.151 16.5234 16.5238 16.2284 16.7942C16.0809 16.9295 15.9681 17.0351 15.8849 17.1162C15.8434 17.1566 15.8117 17.1886 15.788 17.2134C15.7763 17.2256 15.7675 17.2352 15.7611 17.2423C15.7546 17.2496 15.7518 17.253 15.7519 17.2529C15.4917 17.574 15.4354 17.6568 15.4019 17.7319C15.3683 17.8069 15.3442 17.9041 15.2786 18.3121C15.2527 18.4732 15.25 18.7491 15.25 19.5V19.5322C15.25 19.972 15.25 20.3514 15.2218 20.6627C15.192 20.9918 15.1259 21.3178 14.9486 21.625C14.7511 21.967 14.467 22.2511 14.125 22.4486C13.8178 22.6259 13.4918 22.692 13.1627 22.7218C12.8514 22.75 12.472 22.75 12.0322 22.75H11.9678C11.528 22.75 11.1486 22.75 10.8374 22.7218C10.5082 22.692 10.1822 22.6259 9.875 22.4486C9.53296 22.2511 9.24892 21.967 9.05144 21.625C8.87407 21.3178 8.80802 20.9918 8.77818 20.6627C8.74997 20.3514 8.74998 19.972 8.75 19.5322L8.75 19.5C8.75 18.7491 8.74735 18.4732 8.72144 18.3121C8.6558 17.9041 8.63166 17.8069 8.59812 17.7319C8.56459 17.6568 8.50828 17.574 8.24812 17.2529C8.24792 17.2527 8.24514 17.2493 8.23888 17.2423C8.23249 17.2352 8.22369 17.2256 8.21199 17.2134C8.18835 17.1886 8.15661 17.1566 8.11513 17.1162C8.03189 17.0351 7.91912 16.9295 7.77161 16.7942C7.4766 16.5238 7.06034 16.151 6.49845 15.6479C4.81263 14.1384 3.75 11.9428 3.75 9.5ZM9.89202 13.3508C10.2506 13.1434 10.7094 13.2659 10.9168 13.6245C11.134 14 11.5383 14.25 12 14.25C12.4617 14.25 12.866 14 13.0832 13.6245C13.2906 13.2659 13.7494 13.1434 14.108 13.3508C14.4665 13.5582 14.589 14.017 14.3816 14.3755C14.0284 14.9862 13.4454 15.4496 12.75 15.6464V17C12.75 17.4142 12.4142 17.75 12 17.75C11.5858 17.75 11.25 17.4142 11.25 17V15.6464C10.5546 15.4496 9.97163 14.9862 9.61836 14.3755C9.41095 14.017 9.53347 13.5582 9.89202 13.3508Z"/>
                        </svg>
                    </td>
                    <td class="text-cell">
                        Note that you can use any of the network configuration we provide in 'hnn-data' as a starting point when "tuning" your simulations to your experimental data. 
                    </td>
                    <td class="emoji-cell"></td>
                </tr>
            </table>
        </div>
        <h4>
            Interactive Exercise 2
        </h4>
        <p>
            In this exercise, we will focus on hand tuning the parameters for the first proximal drive only. The goal is to improve the fit of the simulated waveform to the experimental data, focusing solely on the first peak (referred to as the "M25" peak in our published work and in <a href="https://dylansdaniels.github.io/website_redesign/tests/workshop.html#figure-b">Figure B</a> above). 
        </p>
        <div class="collapsible-section">
            <h5 class="collapsible-header">
                Exercise 2 Starting Point
            </h5>

            <div class="collapsible-content">
                <ul>
                    <li>
                        If needed, refresh the HNN GUI to return to the default state. Note that previous simulations will be cleared when refreshing.
                    </li>
                    <li>
                        Click <code>Load data</code>. From the "workshops/erp_gui_walkthrough" directory of the "hnn-data" folder, select the "experimental_S1_SupraT.txt" data file. 
                    </li>
                    <li>
                        Select the <code>External Drives</code> tab.
                    </li>
                    <li>
                        Click the <code>Load external drives</code> button. From the "workshops/erp_gui_walkthrough" directory of the "hnn-data" folder, select the "ERPSupraT_Prox1.json" parameter file.
                    </li>
                    <li>
                        From the <code>Simulation</code> tab, change the value of the 'Name' field to something informative, such as "Prox1_Only"
                    </li>
                    <li>
                        Click <code>Run</code> to run the simulation
                    </li>
                    <li>
                        Click the <code>Visualization</code> tab. This should bring you to the tab "ax1" of "Figure 2", corresponding to the lower subplot of Figure 2. 
                    </li>
                    <li>
                        Under the "ax1" tab, click on the dropdown box next to <code>Data to compare</code> and select "experimental_S1_SupraT".
                    </li>
                    <li>
                        Click the <code>Clear axis</code> button at the bottom of the "ax1" tab
                    </li>
                    <li>
                        Click the <code>Add plot</code> button
                    </li>
                </ul>
            </div>
        </div>
        <br>
        <div class="collapsible-section">
            <h5 class="collapsible-header">
                Exercise 2.1
            </h5>

            <div class="collapsible-content">
                <p>
                    From the <code>External Drives</code> tab, click on the first proximal drive (labelled "evprox1"). From there, adjust the values of the Layer 2/3 (L2) and Layer 5 (L5) pyramidal cell <b>AMPA weights</b>. Try the following combinations: 
                    <ul>
                        <li>
                            Simulation 01:
                            <ul>
                                <li>
                                    <code>Name (suggested): Prox1_Only_01</code>
                                </li>
                                <li>
                                    <code>L5_pyramidal AMPA weight ("evprox1"): 0.2400</code>
                                </li>
                                <li>
                                    <code>L2_pyramidal AMPA weight ("evprox1"): 1.0515</code>
                                </li>
                            </ul>

                        </li>
                        <li>
                            Simulation 02:
                            <ul>
                                <li>
                                    <code>Name (suggested): Prox1_Only_02</code>
                                </li>
                                <li>
                                    <code>L5_pyramidal AMPA weight ("evprox1"): 0.0480</code>
                                </li>
                                <li>
                                    <code>L2_pyramidal AMPA weight ("evprox1"): 0.2103</code>
                                </li>
                            </ul>

                        </li>
                    </ul>
                </p>
                <div class="callout callout-note">
                    <table class="callout-table">
                        <tbody>
                            <tr>
                                <td class="emoji-cell">
                                    <svg class="lightbulb-icon" viewBox="0 0 24 24" width="20" height="20">
                                        <path d="M12 2.75C8.27208 2.75 5.25 5.77208 5.25 9.5C5.25 11.4985 6.11758 13.2934 7.49907 14.5304L7.50342 14.5343C8.06008 15.0328 8.48295 15.4114 8.78527 15.6886C9.06989 15.9495 9.29537 16.1628 9.41353 16.3086L9.42636 16.3244C9.64763 16.5974 9.84045 16.8353 9.9676 17.1199C10.0948 17.4044 10.1434 17.7067 10.1992 18.0537L10.2024 18.0738C10.231 18.2517 10.2425 18.4701 10.247 18.75H13.753C13.7575 18.4701 13.769 18.2517 13.7976 18.0738L13.8008 18.0537C13.8566 17.7067 13.9052 17.4044 14.0324 17.1199C14.1596 16.8353 14.3524 16.5974 14.5736 16.3244L14.5865 16.3086C14.7046 16.1628 14.9301 15.9495 15.2147 15.6886C15.5171 15.4114 15.94 15.0327 16.4966 14.5343L16.5009 14.5304C17.8824 13.2934 18.75 11.4985 18.75 9.5C18.75 5.77208 15.7279 2.75 12 2.75ZM13.7436 20.25H10.2564C10.2597 20.3542 10.2646 20.4453 10.2721 20.5273C10.2925 20.7524 10.3269 20.8341 10.3505 20.875C10.4163 20.989 10.511 21.0837 10.625 21.1495C10.6659 21.1731 10.7476 21.2075 10.9727 21.2279C11.2082 21.2493 11.5189 21.25 12 21.25C12.4811 21.25 12.7918 21.2493 13.0273 21.2279C13.2524 21.2075 13.3341 21.1731 13.375 21.1495C13.489 21.0837 13.5837 20.989 13.6495 20.875C13.6731 20.8341 13.7075 20.7524 13.7279 20.5273C13.7354 20.4453 13.7403 20.3542 13.7436 20.25ZM3.75 9.5C3.75 4.94365 7.44365 1.25 12 1.25C16.5563 1.25 20.25 4.94365 20.25 9.5C20.25 11.9428 19.1874 14.1384 17.5016 15.6479C16.9397 16.151 16.5234 16.5238 16.2284 16.7942C16.0809 16.9295 15.9681 17.0351 15.8849 17.1162C15.8434 17.1566 15.8117 17.1886 15.788 17.2134C15.7763 17.2256 15.7675 17.2352 15.7611 17.2423C15.7546 17.2496 15.7518 17.253 15.7519 17.2529C15.4917 17.574 15.4354 17.6568 15.4019 17.7319C15.3683 17.8069 15.3442 17.9041 15.2786 18.3121C15.2527 18.4732 15.25 18.7491 15.25 19.5V19.5322C15.25 19.972 15.25 20.3514 15.2218 20.6627C15.192 20.9918 15.1259 21.3178 14.9486 21.625C14.7511 21.967 14.467 22.2511 14.125 22.4486C13.8178 22.6259 13.4918 22.692 13.1627 22.7218C12.8514 22.75 12.472 22.75 12.0322 22.75H11.9678C11.528 22.75 11.1486 22.75 10.8374 22.7218C10.5082 22.692 10.1822 22.6259 9.875 22.4486C9.53296 22.2511 9.24892 21.967 9.05144 21.625C8.87407 21.3178 8.80802 20.9918 8.77818 20.6627C8.74997 20.3514 8.74998 19.972 8.75 19.5322L8.75 19.5C8.75 18.7491 8.74735 18.4732 8.72144 18.3121C8.6558 17.9041 8.63166 17.8069 8.59812 17.7319C8.56459 17.6568 8.50828 17.574 8.24812 17.2529C8.24792 17.2527 8.24514 17.2493 8.23888 17.2423C8.23249 17.2352 8.22369 17.2256 8.21199 17.2134C8.18835 17.1886 8.15661 17.1566 8.11513 17.1162C8.03189 17.0351 7.91912 16.9295 7.77161 16.7942C7.4766 16.5238 7.06034 16.151 6.49845 15.6479C4.81263 14.1384 3.75 11.9428 3.75 9.5ZM9.89202 13.3508C10.2506 13.1434 10.7094 13.2659 10.9168 13.6245C11.134 14 11.5383 14.25 12 14.25C12.4617 14.25 12.866 14 13.0832 13.6245C13.2906 13.2659 13.7494 13.1434 14.108 13.3508C14.4665 13.5582 14.589 14.017 14.3816 14.3755C14.0284 14.9862 13.4454 15.4496 12.75 15.6464V17C12.75 17.4142 12.4142 17.75 12 17.75C11.5858 17.75 11.25 17.4142 11.25 17V15.6464C10.5546 15.4496 9.97163 14.9862 9.61836 14.3755C9.41095 14.017 9.53347 13.5582 9.89202 13.3508Z"/>
                                    </svg>
                                </td>
                                <td class="text-cell">
                                    Note that when updating a simulation parameter (as opposed to a visualization parameter), you'll need to run the simulation with a new value for "Name." Otherwise, you will receive a failure message with the warning, 'Simulation with the same name already exists'. To change the "Name," return to the <code>Simulation</code> tab, enter a new value for the 'Name' field, and then click the <code>Run</code> button.
                                </td>
                                <td class="emoji-cell"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <p>
                    Once you've run the two simulations above, create a new Figure that displays all of the simulated dipoles and the experimental data on the same graph.
                </p>
                <p>    
                    You can do this by selecting any previously-generated figure and adding your new simulations to the dipole plot. For example, if you're working from the 'Starting Point' outlined above:
                    <ul>
                        <li>
                            Select "ax1" of "Figure 2" from the <code>Visualization</code> tab 
                            <ul>
                                <li>
                                    Note that "ax1" refers to the lower subplot of Figure 2 and has a "Type" of "current dipole"
                                </li>
                            </ul>
                        </li>
                        <li>
                            Click the "Simulation Data" dropdown and select one of your new simulations.
                        </li>
                        <li>
                            If you're already plotted the experimental data, ensure 'Data to compare' is set to 'None'
                        </li>
                        <li>
                            Click the <code>Add plot</code> button.
                        </li>
                        <li>
                            Repeat these steps for the other new simulation.
                        </li>
                    </ul>
                </p>
                <div class="callout callout-note">
                    <table class="callout-table">
                        <tbody>
                            <tr>
                                <td class="emoji-cell">
                                    <svg class="lightbulb-icon" viewBox="0 0 24 24" width="20" height="20">
                                        <path d="M12 2.75C8.27208 2.75 5.25 5.77208 5.25 9.5C5.25 11.4985 6.11758 13.2934 7.49907 14.5304L7.50342 14.5343C8.06008 15.0328 8.48295 15.4114 8.78527 15.6886C9.06989 15.9495 9.29537 16.1628 9.41353 16.3086L9.42636 16.3244C9.64763 16.5974 9.84045 16.8353 9.9676 17.1199C10.0948 17.4044 10.1434 17.7067 10.1992 18.0537L10.2024 18.0738C10.231 18.2517 10.2425 18.4701 10.247 18.75H13.753C13.7575 18.4701 13.769 18.2517 13.7976 18.0738L13.8008 18.0537C13.8566 17.7067 13.9052 17.4044 14.0324 17.1199C14.1596 16.8353 14.3524 16.5974 14.5736 16.3244L14.5865 16.3086C14.7046 16.1628 14.9301 15.9495 15.2147 15.6886C15.5171 15.4114 15.94 15.0327 16.4966 14.5343L16.5009 14.5304C17.8824 13.2934 18.75 11.4985 18.75 9.5C18.75 5.77208 15.7279 2.75 12 2.75ZM13.7436 20.25H10.2564C10.2597 20.3542 10.2646 20.4453 10.2721 20.5273C10.2925 20.7524 10.3269 20.8341 10.3505 20.875C10.4163 20.989 10.511 21.0837 10.625 21.1495C10.6659 21.1731 10.7476 21.2075 10.9727 21.2279C11.2082 21.2493 11.5189 21.25 12 21.25C12.4811 21.25 12.7918 21.2493 13.0273 21.2279C13.2524 21.2075 13.3341 21.1731 13.375 21.1495C13.489 21.0837 13.5837 20.989 13.6495 20.875C13.6731 20.8341 13.7075 20.7524 13.7279 20.5273C13.7354 20.4453 13.7403 20.3542 13.7436 20.25ZM3.75 9.5C3.75 4.94365 7.44365 1.25 12 1.25C16.5563 1.25 20.25 4.94365 20.25 9.5C20.25 11.9428 19.1874 14.1384 17.5016 15.6479C16.9397 16.151 16.5234 16.5238 16.2284 16.7942C16.0809 16.9295 15.9681 17.0351 15.8849 17.1162C15.8434 17.1566 15.8117 17.1886 15.788 17.2134C15.7763 17.2256 15.7675 17.2352 15.7611 17.2423C15.7546 17.2496 15.7518 17.253 15.7519 17.2529C15.4917 17.574 15.4354 17.6568 15.4019 17.7319C15.3683 17.8069 15.3442 17.9041 15.2786 18.3121C15.2527 18.4732 15.25 18.7491 15.25 19.5V19.5322C15.25 19.972 15.25 20.3514 15.2218 20.6627C15.192 20.9918 15.1259 21.3178 14.9486 21.625C14.7511 21.967 14.467 22.2511 14.125 22.4486C13.8178 22.6259 13.4918 22.692 13.1627 22.7218C12.8514 22.75 12.472 22.75 12.0322 22.75H11.9678C11.528 22.75 11.1486 22.75 10.8374 22.7218C10.5082 22.692 10.1822 22.6259 9.875 22.4486C9.53296 22.2511 9.24892 21.967 9.05144 21.625C8.87407 21.3178 8.80802 20.9918 8.77818 20.6627C8.74997 20.3514 8.74998 19.972 8.75 19.5322L8.75 19.5C8.75 18.7491 8.74735 18.4732 8.72144 18.3121C8.6558 17.9041 8.63166 17.8069 8.59812 17.7319C8.56459 17.6568 8.50828 17.574 8.24812 17.2529C8.24792 17.2527 8.24514 17.2493 8.23888 17.2423C8.23249 17.2352 8.22369 17.2256 8.21199 17.2134C8.18835 17.1886 8.15661 17.1566 8.11513 17.1162C8.03189 17.0351 7.91912 16.9295 7.77161 16.7942C7.4766 16.5238 7.06034 16.151 6.49845 15.6479C4.81263 14.1384 3.75 11.9428 3.75 9.5ZM9.89202 13.3508C10.2506 13.1434 10.7094 13.2659 10.9168 13.6245C11.134 14 11.5383 14.25 12 14.25C12.4617 14.25 12.866 14 13.0832 13.6245C13.2906 13.2659 13.7494 13.1434 14.108 13.3508C14.4665 13.5582 14.589 14.017 14.3816 14.3755C14.0284 14.9862 13.4454 15.4496 12.75 15.6464V17C12.75 17.4142 12.4142 17.75 12 17.75C11.5858 17.75 11.25 17.4142 11.25 17V15.6464C10.5546 15.4496 9.97163 14.9862 9.61836 14.3755C9.41095 14.017 9.53347 13.5582 9.89202 13.3508Z"/>
                                    </svg>
                                </td>
                                <td class="text-cell">
                                    Note that the RMSE is not updated when you click the <code>Add plot</code> button. The RMSE is only calculated once when the initial comparison is made. If you would like to see the RMSE for another simulation, you can either create a new plot or you can click <code>Clear axis</code> and regenerate the figure, ensuring that the first comparison you make is the one for which you would like the RMSE to be calculated
                                </td>
                                <td class="emoji-cell"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <p>
                    Next, compare and contrast the dipoles and the spiking profiles for the initial simulation (before changing the AMPA weights) and your "best" simulation (after changing the AMPA weights). Note that you should choose your "best" simulation based on which one most closely matches the "M25" peak.
                </p>
                <p>
                    You can create a raster plot with the layer-specific dipoles overlaid by following the steps below:
                    <ul>
                        <li>
                            Select "Dipole Layers-Spikes (1x1)" from the "Layout template" dropdown menu in the <code>Visualization</code> tab.
                        </li>
                        <li>
                            Doing so will trigger the "Dataset" dropdown box to appear below the "Layout template" dropdown. 
                        </li>
                        <li>
                            From the "Dataset" dropdown box, select your simulation and then click <code>Make figure</code>.
                        </li>
                        <li>
                            Repeat these steps for each simulation you want to visualize
                        </li>
                    </ul>
                </p>
            </div>
        </div>
        <p>
            <b>Discussion Question:</b>
            <ul>
                <li>
                    How do the AMPA weights relate to current flow in our simulation? Refer to <a href="https://dylansdaniels.github.io/website_redesign/tests/workshop.html#figure-a">Figure A</a> above for a visual representation of the network and drives.
                </li>
                <li>
                    What differences do you observe in the layer-specific dipoles and the spiking profiles between the initial simulation and the "best" simulation?
                </li>
            </ul>
        </p>
        <div class="collapsible-section">
            <h5 class="collapsible-header">
                Exercise 2.2
            </h5>

            <div class="collapsible-content">
                <p>
                    From the <code>External Drives</code> tab, set the AMPA weights to the values from Exercise 2.1 that produced the best fit to the "M25" peak.
                </p>
                <p>
                    Next, try setting the Layer 2/3 basket cell (listed as 'L2_basket') AMPA and NMDA weights to <code>0</code>.
                </p>
                <p>
                    Once you've run the above simulation, compare the spiking and the layer-specific dipoles for the new simulation with the best simulation from Exercise 2.1. You can create a raster plot with the layer-specific dipoles overlaid by following the steps below:
                    <ul>
                        <li>
                            Select "Dipole Layers-Spike (1x1)" from the "Layout template" dropdown menu in the <code>Visualization</code> tab.
                        </li>
                        <li>
                            Doing so will trigger the "Dataset" dropdown box to appear below the "Layout template" dropdown.
                        </li>
                        <li>
                            From the "Dataset" dropdown box, select your simulation and then click <code>Make figure</code>.
                        </li>
                        <li>
                            Repeat these steps for each simulation you want to visualize
                        </li>
                    </ul>
                </p>
            </div>
        </div>
        <p>
            <b>Discussion Questions:</b> 
            <ul>
                <li>
                    What happens to the Layer 2/3 and Layer 5 dipoles when you set the Layer 2/3 basket AMPA/NMDA weights to <code>0</code>?
                </li>
                <li>
                    How do differences in the spiking profiles relate to the observed differences in the dipole across these simulations? You may want to refer to the <a href="https://dylansdaniels.github.io/website_redesign/tests/workshop.html#figure-a">schematic</a> above. 
                </li>
            </ul>
        </p>
        <h4>
            Interactive Exercise 3
        </h4>
        <p>
            In this exercise, we will hand tune the parameters for the first distal drive. The goal is to improve the fit of the simulated waveform to the experimental data, focusing on the trough at ~ 70ms ("M70").
        </p>
        <div class="collapsible-section">
            <h5 class="collapsible-header">
                Exercise 3 Starting Point
            </h5>

            <div class="collapsible-content">
                <ul>
                    <li>
                        If needed, refresh the HNN GUI to return to the default state. Note that previous simulations will be cleared when refreshing.
                    </li>
                    <li>
                        Click <code>Load data</code>. From the "workshops/erp_gui_walkthrough" directory of the "hnn-data" folder, select the "experimental_S1_SupraT.txt" data file. 
                    </li>
                    <li>
                        Select the <code>External Drives</code> tab.
                    </li>
                    <li>
                        Click the <code>Load external drives</code> button. From the "workshops/erp_gui_walkthrough" directory of the "hnn-data" folder, select the "ERPSupraT_Prox1_Dist1.json" parameter file.
                    </li>
                    <li>
                        From the <code>Simulation</code> tab, change the value of the 'Name' field to something informative, such as "SupraT_Prox1_Dist1"
                    </li>
                    <li>
                        Click <code>Run</code> to run the simulation
                    </li>
                    <li>
                        Click the <code>Visualization</code> tab. This should bring you to the tab "ax1" of "Figure 2", corresponding to the lower subplot of Figure 2. 
                    </li>
                    <li>
                        Under the "ax1" tab, click on the downdown box next to <code>Data to compare</code> and select "experimental_S1_SupraT". 
                    </li>
                    <li>
                        Click the <code>Clear axis</code> button at the bottom of the "ax1" tab
                    </li>
                    <li>
                        Click the <code>Add plot</code> button
                    </li>
                </ul>
            </div>
        </div>
        <br>
        <div class="collapsible-section">
            <h5 class="collapsible-header">
                Exercise 3.1
            </h5>

            <div class="collapsible-content">
                <p>
                    From the <code>External Drives</code> tab, adjust the value of the Standard Deviation about the mean arrival time (labelled "Std dev time") for the first distal drive (labelled "evdist1"). Try the following values: <code>13.81, 3.81</code>
                </p>
                <p>
                    Compare the layer-specific dipoles and the spiking profiles for each simulation, as done in <a href="https://dylansdaniels.github.io/website_redesign/tests/workshop.html#exercise-22">Exercise 2.2</a> above. 
                </p>
            </div>
        </div>
        <p>
            <b>Discussion Questions:</b> 
            <ul>
                <li>
                    How does increasing / decreasing the standard deviation of the distal drive's arrival time affect the amplitude of the "M70" trough"?
                </li>
                <li>
                    What differences do you observe in the raster plots for the different simulations? How do the differences in spiking relate to the differences observed in the layer-specific dipoles?
                </li>
            </ul>
        </p>
        <h4>
            Interactive Exercise 4
        </h4>
        <p>
            In this exercise, we will hand tune the parameters for the second proximal drive, with the goal of continuing to improve the fit of the simulated waveform to the experimental data. 
            <br><br>
            Note that we will simulate a single peak that fits the overall shape of both the "M100" and "M135" peaks shown in <a href="https://dylansdaniels.github.io/website_redesign/tests/workshop.html#figure-b">Figure B</a>. Capturing the nuanced dynamics that yield the two distinct "M100" and "M135" peaks requires simulating many trials, as we do in our published work. So we simplify the exercise here for illustrative purposes and to make it feasible to run the exercises in a short amount of time. 
        </p>
        <div class="collapsible-section">
            <h5 class="collapsible-header">
                Exercise 4 Starting Point
            </h5>

            <div class="collapsible-content">
                <ul>
                    <li>
                        If needed, refresh the HNN GUI to return to the default state. Note that previous simulations will be cleared when refreshing.
                    </li>
                    <li>
                        Click <code>Load data</code>. From the "workshops/erp_gui_walkthrough" directory of the "hnn-data" folder, select the "experimental_S1_SupraT.txt" data file. 
                    </li>
                    <li>
                        Select the <code>External Drives</code> tab.
                    </li>
                    <li>
                        Click the <code>Load external drives</code> button. From the "workshops/erp_gui_walkthrough" directory of the "hnn-data" folder, select the "ERPSupraT_Prox1_Dist1_Prox2.json" parameter file.
                    </li>
                    <li>
                        From the <code>Simulation</code> tab, change the value of the 'Name' field to something informative, such as "SupraT_AllDrives"
                    </li>
                    <li>
                        Click <code>Run</code> to run the simulation
                    </li>
                    <li>
                        Click the <code>Visualization</code> tab. This should bring you to the tab "ax1" of "Figure 2", corresponding to the lower subplot of Figure 2. 
                    </li>
                    <li>
                        Under the "ax1" tab, click on the downdown box next to <code>Data to compare</code> and select "experimental_S1_SupraT". 
                    </li>
                    <li>
                        Click the <code>Clear axis</code> button at the bottom of the "ax1" tab
                    </li>
                    <li>
                        Click the <code>Add plot</code> button
                    </li>
                </ul>
            </div>
        </div>
        <br>
        <div class="collapsible-section">
            <h5 class="collapsible-header">
                Exercise 4.1
            </h5>

            <div class="collapsible-content">
                <p>
                    From the <code>External Drives</code> tab, adjust the value of the mean arrival time (labelled "Mean time") for the second proximal drive (labelled "evprox2"). Try the following values: <code>105, 95</code>
                </p>
            </div>
        </div>
        <p>
            <b>Discussion Questions:</b> 
            <ul>
                <li>
                    How does changing the mean arrival time of the second proximal drive affect the amplitude of the "M135" peak? Explain your reasoning.
                </li>
                <li>
                    Does changing the mean arrival time of the second proximal drive affect other parts of the dipole? If so, what difference do you observe in other time windows, and why might this be the case?
                </li>
            </ul>
        </p>
        <h4>
            Interactive Exercise 5
        </h4>
        <p>
            Now that you have simulated all three drives, you may notice that there are still some discrepancies between the simulated data and the experimental data. What additional parameters might you adjust to continue to improve the fit? Try to adjust the timing and strength of any of the external drives and see if you can get a RMSE value less than 18.5.
        </p>
        <p>
            Note that some features of the waveform will be difficult to capture when we're only simulating one trial due to the lack of stochasticity. In practice, we would simulate a large number of trials and tune to the average waveform. However, there is still room for improvement even when simulating only one trial.
        </p>
        <b>Discussion Questions:</b> 
        <ul>
            <li>
                Which parameters did you change and why?
            </li>
            <li>
                Did your parameter changes always yield the results you expected? If not, can you explain the discrepancies? (Hint: try looking at the spiking plots and the layer-specific dipoles in conjunction with the <a href="https://dylansdaniels.github.io/website_redesign/tests/workshop.html#figure-a">schematic</a> above.)
            </li>
        </ul>
        <p>
            Once you've run some simulations and answered the above questions, you can load our "solution" from the <code>External Drives</code> tab by clicking the <code>Load external drives</code> button and selecting the "ERPSupraT_hand-tuned.json" file from the "workshops/erp_gui_walkthrough" directory of the "hnn-data" folder. Note that our "solution" is merely one possible answer among many, and so don't feel constrained by the solution we provide.
        </p>


    <br><br>
    </div> <!-- close content -->
    </div> <!-- close content wrapper -->
</div> <!-- close main -->

<script>
    // ----------------------------------------
    // Manage footer
    // ----------------------------------------
    // This function will update the footer links when a page is loaded
    // locally so that naivagation remains functional without a server
    // Note: this solution is specific to MacOS
    document.addEventListener("DOMContentLoaded", function() {
        if (window.location.protocol === "file:") {
            // Get the current local directory path
            const currentDir = window.location.pathname.substring(0, window.location.pathname.lastIndexOf('/'));

            // Process both previous and next links
            document.querySelectorAll('.previous-area, .next-area').forEach(function(area) {
                const link = area.getAttribute('data-link');
                
                if (link && link.startsWith("/")) {
                    // Extract the local root directory
                    const rootPath = currentDir.split("/website_redesign/")[0];
                    // Prepend root path to link
                    const resolvedLink = "file://" + rootPath + link;
                    area.setAttribute("data-link", resolvedLink);
                }
            });
        }
    });
    // Hide the area if data-link is 'None'
    document.querySelectorAll('.previous-area, .next-area').forEach(function(area) {
        if (area.getAttribute('data-link') === 'None') {
            area.style.display = 'none'; 
        }
    });

    // Redirect to the specified link
    document.querySelectorAll('.previous-area, .next-area').forEach(function(area) {
        area.addEventListener('click', function() {
            window.location.href = area.getAttribute('data-link');
        });
    });

    // ----------------------------------------
    // Manage sidebar
    // ----------------------------------------
    let isSidebarOpen = true; // Sidebar is initially open
    let isSidebarFullyOpen = true; // Sidebar is fully open
    const maxWidth = '350px';

    function toggleNav() {
        const sidebar = document.getElementById("mySidebar");
        const main = document.getElementById("main");
        const topbar = document.querySelector(".topbar");

        // Toggle sidebar state
        if (isSidebarOpen) {
            sidebar.style.width = "0";
            main.style.marginLeft = "0";
            topbar.style.marginLeft = "0";
            topbar.style.width = "100%";
            isSidebarFullyOpen = false;
        } else {
            sidebar.style.width = maxWidth;
            main.style.marginLeft = maxWidth;
                // match margin to new width
            topbar.style.marginLeft = maxWidth;
            topbar.style.width = `calc(100% - ${maxWidth})`;
                // adjust topbar width
        }

        // Toggle the sidebar state
        isSidebarOpen = !isSidebarOpen;

        // Store the sidebar state in localStorage
        localStorage.setItem("sidebarState", isSidebarOpen ? "open" : "closed");
    }

    // Always listen for the transitionend on the sidebar
    const sidebar = document.getElementById("mySidebar");
    sidebar.addEventListener('transitionend', function() {
        if (sidebar.style.width === maxWidth) {
            // Sidebar has fully opened
            isSidebarFullyOpen = true;
        } else {
            // Sidebar is not fully open
            isSidebarFullyOpen = false;
        }
    });

    // Open the sidebar on page load
    // -----------------------------

    // Apply sidebar state before the page renders
    // Added to help with initial page "flicker" as the position is
    // calculated and applied
    const savedState = localStorage.getItem("sidebarState");
    if (savedState === "closed") {
        document.body.classList.add("sidebar-closed");
    } else {
        document.body.classList.add("sidebar-open");
    }

    window.onload = function() {
        const sidebar = document.getElementById("mySidebar");
        const main = document.getElementById("main");
        const topbar = document.querySelector(".topbar");

        // Retrieve stored state
        const savedState = localStorage.getItem("sidebarState");

        // Determine initial state
        if (savedState === "closed") {
            sidebar.style.width = "0";
            main.style.marginLeft = "0";
            topbar.style.marginLeft = "0";
            topbar.style.width = "100%";
            isSidebarOpen = false;
            isSidebarFullyOpen = false;
        } else {
            sidebar.style.width = maxWidth;
            main.style.marginLeft = maxWidth;
            topbar.style.marginLeft = maxWidth;
            topbar.style.width = `calc(100% - ${maxWidth})`;
            isSidebarOpen = true;
            isSidebarFullyOpen = true;
        }

        // Disable transition for the initial state
        sidebar.style.transition = "none";
        main.style.transition = "none";
        topbar.style.transition = "none";

        // Re-enable transition for subsequent toggles
        setTimeout(() => {
            sidebar.style.transition = "width 0.5s";
            main.style.transition = "margin-left 0.5s";
            topbar.style.transition = "margin-left 0.5s, width 0.5s";
        }, 10);
    }

    function toggleSubmenu(event) {
        const header = event.target.closest('#sidebar-header');
            // Get the clicked header
        const submenu = header.nextElementSibling;
            // Get the submenu
        const toggleIcon = header.querySelector('.toggle-icon');
            // Get the icon

        if (submenu && submenu.classList.contains('submenu')) {
            submenu.classList.toggle('open'); 
                // Toggle the 'open' class to control visibility
            toggleIcon.textContent = submenu.classList.contains('open') ? '-' : '+'; 
                // Update icon
        }
    }

    // Resolve sidebar links for local development
    // -------------------------------------------
    // This function will update the sidebar links when a page is loaded
    // locally so that sidebar naivagation remains functional without a server
    // Note: this solution is specific to MacOS
    document.addEventListener("DOMContentLoaded", function() {
        if (window.location.protocol === "file:") {
            // get the current local directory path
            const currentDir = window.location.pathname.substring(0, window.location.pathname.lastIndexOf('/'));

            // get 'absolute' links with root of 'website_redesign'
            const links = document.querySelectorAll("#mySidebar a");
            links.forEach(link => {
                const href = link.getAttribute("href");

                if (href && href.startsWith("/")) {
                    // extract the local root directory
                    const rootPath = currentDir.split("/website_redesign/")[0];
                    // prepend root path to link
                    const resolvedHref = "file://" + rootPath + href;
                    link.setAttribute("href", resolvedHref);
                }
            });

            // Update image sources for icons
            const images = document.querySelectorAll(".social-icons img, .menu-icons img");
            images.forEach(img => {
                const src = img.getAttribute("src");

                if (src && src.startsWith("/")) {
                    // extract the local root directory
                    const rootPath = currentDir.split("/website_redesign/")[0];
                    // prepend root path to image source
                    const resolvedSrc = "file://" + rootPath + src;
                    img.setAttribute("src", resolvedSrc);
                }
            });
        }
    });

    // Custom tooltips for the sidebar
    // -------------------------------
    // Flag to track tooltip visibility
    let isTooltipVisible = false;

    // Add text to the 'sidebar-tooltip' attribute for sidebar anchor tags
    document.querySelectorAll('.sidebar a').forEach(anchor => {
        const cleanedText = anchor.textContent.replace(/[+\-]/g, '').trim();
        anchor.setAttribute('sidebar-tooltip', cleanedText);
    });

    // Handle sidebar tooltips
    document.querySelectorAll('.sidebar a').forEach(function(link) {
        link.addEventListener('mouseenter', function(event) {
            const tooltipText = event.target.getAttribute('sidebar-tooltip');
            
            if (!tooltipText || isTooltipVisible || !isSidebarFullyOpen) return; // Only show tooltip if none is visible

            // Check if the text is overflowing
            if (event.target.scrollWidth > event.target.offsetWidth) {
                const delay = 500; // Set the delay time (in ms), adjust as needed

                // Create the tooltip after the delay
                setTimeout(function() {
                    // Remove any existing tooltips
                    const existingTooltip = document.querySelector('.sidebar-tooltip');
                    if (existingTooltip) {
                        existingTooltip.remove();
                    }

                    // Create the tooltip element dynamically
                    const tooltip = document.createElement('div');
                    tooltip.classList.add('sidebar-tooltip');  // Use the existing class
                    tooltip.innerText = tooltipText;

                    // Append the tooltip to the sidebar container
                    const sidebarContainer = document.querySelector('.sidebar');
                    sidebarContainer.appendChild(tooltip);

                    // Get the position of the link and the sidebar container
                    const rect = event.target.getBoundingClientRect();
                    const sidebarRect = sidebarContainer.getBoundingClientRect();

                    // Position the tooltip relative to the sidebar container
                    tooltip.style.position = 'absolute';
                    tooltip.style.left = `${rect.left - sidebarRect.left + sidebarContainer.scrollLeft + 20}px`;
                    tooltip.style.top = `${rect.bottom - sidebarRect.top + sidebarContainer.scrollTop + 5}px`;

                    // Make sure the tooltip is visible
                    tooltip.style.opacity = '1';

                    // Set the flag to true indicating that the tooltip is visible
                    isTooltipVisible = true;
                }, delay); // Delay the tooltip creation
            }
        });

        link.addEventListener('mouseleave', function(event) {
            // Remove the tooltip when the mouse leaves
            const tooltip = document.querySelector('.sidebar-tooltip');
            if (tooltip) {
                tooltip.remove();
            }

            // Reset the flag to false when the tooltip is removed
            isTooltipVisible = false;
        });
    });

    // Close all open submenus in the sidebar
    // --------------------------------------
    document.addEventListener("DOMContentLoaded", function() {
        // Function to close all open submenus in the navbar
        function closeAllSubmenus() {
            const allSubmenus = document.querySelectorAll('.submenu.open'); // Select all open submenus
            allSubmenus.forEach(submenu => {
                submenu.classList.remove('open'); // Remove 'open' class to collapse
                const toggleIcon = submenu.previousElementSibling.querySelector('.toggle-icon');
                if (toggleIcon) {
                    toggleIcon.textContent = '+'; // Reset icon to '+'
                }
            });
        }

        // Add functionality to collapse button (SVG icon)
        const collapseIcon = document.querySelector('.collapse-icon');
        if (collapseIcon) {
            collapseIcon.addEventListener('click', function(event) {
                event.stopPropagation(); // Prevent event propagation to avoid unwanted behavior
                closeAllSubmenus(); // Close all open submenus when the icon is clicked
            });
        }
    });

    // Keep the current page open in the sidebar
    // -----------------------------------------
    document.addEventListener("DOMContentLoaded", function () {
        // Get the full path relative to the 'content' folder
        const currentPage = window.location.pathname.split("/content/")[1].split("?")[0];

        // Find the active link using the full path
        const activeLink = document.querySelector(`#mySidebar a[href$='${currentPage}']`);

        if (activeLink) {
            // Apply the active class
            activeLink.classList.add("active");
             // Find the closest submenu
            const submenu = activeLink.closest('.submenu');

            if (submenu) {
                // Keep the submenu open
                submenu.classList.add('open');
                const toggleIcon = submenu.previousElementSibling.querySelector('.toggle-icon');

                if (toggleIcon) {
                    // Ensure the toggle icon reflects the open state
                    toggleIcon.textContent = '-';
                }
            }
        }
    });

    // ------------------------------
    // Font size buttons and dropdown
    // ------------------------------
    document.addEventListener("DOMContentLoaded", function() {
        const content = document.getElementById("content");

        // Retrieve and apply the saved font size
        const savedFontSize = localStorage.getItem("fontSize");
        if (savedFontSize && content) {
            content.style.fontSize = savedFontSize + "px";
        }
    });

    function increaseFontSize() {
        event.stopPropagation();  // Prevent dropdown from closing
        const content = document.getElementById("content");
        const currentSize = parseFloat(window.getComputedStyle(content).fontSize);
        const newSize = currentSize + 1;

        content.style.fontSize = newSize + "px";

        // save font size to localStorage
        localStorage.setItem("fontSize", newSize);
    }

    function decreaseFontSize() {
        event.stopPropagation();  // Prevent dropdown from closing
        const content = document.getElementById("content");
        const currentSize = parseFloat(window.getComputedStyle(content).fontSize);
        const newSize = currentSize - 1;

        content.style.fontSize = newSize + "px";

        // save font size to localStorage
        localStorage.setItem("fontSize", newSize);
    }

    // Dropdown for font buttons
    function toggleDropdown() {
        const dropdownContent = document.querySelector('.dropdown-content');
        dropdownContent.style.display = dropdownContent.style.display === 'block' ? 'none' : 'block';
    }

    // Open/close dropdown on click of the button
    document.getElementById('dropdownButton').onclick = function(event) {
        event.stopPropagation();  // Prevent the click from triggering the window.onclick event
        toggleDropdown();
    };

    // Close dropdown if clicking outside
    window.onclick = function(event) {
        const dropdownContent = document.querySelector('.dropdown-content');
        if (!event.target.closest('.dropdown')) {  // Close if click outside the dropdown
            dropdownContent.style.display = 'none';
        }
    };

    // ----------------------------------------
    // Toggle between light and dark themes
    // ----------------------------------------
    // Wait for the DOM to be fully loaded
    document.addEventListener('DOMContentLoaded', () => {
        const themeToggle = document.querySelector('.theme-toggle');
        const sidebar = document.querySelector('.sidebar');
        const sunSVG = `
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                <path d="M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391 371.1 498.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391 13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256 2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121 140.9 13.1c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1 346.3 2.8c4.5-3.1 10.2-3.7 15.2-1.6zM160 256a96 96 0 1 1 192 0 96 96 0 1 1 -192 0zm224 0a128 128 0 1 0 -256 0 128 128 0 1 0 256 0z"></path>
            </svg>
        `;
        const moonSVG = `
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512">
                <path d="M223.5 32C100 32 0 132.3 0 256S100 480 223.5 480c60.6 0 115.5-24.2 155.8-63.4c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6c-96.9 0-175.5-78.8-175.5-176c0-65.8 36-123.1 89.3-153.3c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"></path>
            </svg>
        `;

        // Check the saved theme preference
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme) {
            document.body.classList.toggle('dark-mode', savedTheme === 'dark');
            themeToggle.innerHTML = savedTheme === 'dark' ? moonSVG : sunSVG;
            sidebar.classList.toggle('dark-mode', savedTheme === 'dark');
        } else {
            // Default to light theme if no saved preference
            themeToggle.innerHTML = sunSVG;
        }

        // Add click event to toggle theme
        themeToggle.addEventListener('click', () => {
            const isDarkMode = document.body.classList.toggle('dark-mode');
            themeToggle.innerHTML = isDarkMode ? moonSVG : sunSVG;
            sidebar.classList.toggle('dark-mode', isDarkMode);
            localStorage.setItem('theme', isDarkMode ? 'dark' : 'light');
        });
    });

    // ----------------------------------------
    // Add a clickable '#' for each heading 
    // that directs to that heading
    // ----------------------------------------
    document.addEventListener("DOMContentLoaded", function () {
        document.querySelectorAll("h1, h2, h3, h4, h5, h6").forEach(header => {
            if (!header.id) {
                let text = header.textContent.trim().toLowerCase().replace(/\s+/g, '-').replace(/[^\w\-]/g, '');
                header.id = text;
            }

            // Avoid adding duplicate links if the script runs multiple times
            if (!header.querySelector(".headerlink")) {
                let link = document.createElement("a");
                link.className = "headerlink";
                link.href = `#${header.id}`;
                link.title = "Link to this heading";
                link.textContent = " #"; // Space before # for spacing

                header.appendChild(link);
            }
        });
    });

</script>

<!------------------------ #
# Code syntax highlighting #
# ------------------------->
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>

<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />

<script>
    // Remove the leading whitespace/newlines around code blocks 
    // caused by the html structure used for readability
    document.addEventListener("DOMContentLoaded", function() {
        // Select all code blocks
        const codeBlocks = document.querySelectorAll('.code-cell code.language-python');

        codeBlocks.forEach(function(block) {
            // Apply syntax highlighting to the code block
            // Note: The below line is not needed with this setup
            //  but may be useful in the case that the method
            //  is later changed
            // Prism.highlightElement(block);

            // Get the code with highlighted classes
            const highlightedHTML = block.innerHTML;

            // Remove leading/trailing whitespace/newlines
            block.innerHTML = highlightedHTML.trim();
        });

        // Select all output-code blocks
        const outputBlocks = document.querySelectorAll('.output-cell .output-code');

        outputBlocks.forEach(function(block) {
            // Remove unwanted leading/trailing whitespace or newlines
            block.textContent = block.textContent.trim();
        });
    });

</script>



<!-- <script>
    var coll = document.getElementsByClassName("collapsible-header");
    for (var i = 0; i < coll.length; i++) {
        coll[i].addEventListener("click", function() {
            this.classList.toggle("active");
            var content = this.nextElementSibling;
            if (content.style.display === "block") {
                content.style.display = "none";
            } else {
                content.style.display = "block";
            }
        });
    }
</script> -->

<!-- JavaScript for Collapsible Functionality -->
<script>
    document.querySelectorAll(".collapsible-header").forEach(header => {
        header.addEventListener("click", function () {
            const section = this.closest(".collapsible-section"); // Get parent section
            section.classList.toggle("active");
            this.classList.toggle("active"); // Keep this for toggling the plus/minus sign

            const content = section.querySelector(".collapsible-content");
            content.style.display = content.style.display === "block" ? "none" : "block";
        });
    });
</script>


</body>
</html>
